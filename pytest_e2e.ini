[pytest]
# Pytest configuration for E2E tests

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Async support
asyncio_mode = auto

# Markers for test categorization
markers =
    e2e: End-to-end tests requiring browser automation
    section_management: Tests for section management functionality
    file_upload: Tests for file upload functionality
    integration: Tests for MoodleClaude integration
    accessibility: Accessibility and usability tests
    slow: Tests that take longer to run
    smoke: Critical smoke tests
    regression: Regression tests

# Output configuration
addopts =
    --tb=short
    --strict-markers
    --strict-config
    --verbose
    --html=reports/e2e_report.html
    --self-contained-html
    --json-report
    --json-report-file=reports/e2e_report.json

# Timeout settings
timeout = 300  # 5 minutes per test
timeout_method = thread

# Warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:playwright.*

# Logging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Test execution
minversion = 7.0
